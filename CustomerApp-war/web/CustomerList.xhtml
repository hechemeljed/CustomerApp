<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="./resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
    </h:head>
    <h:body>
        <f:event type="javax.faces.event.PreRenderViewEvent" listener="#{customerMBean.preRenderView}"/>
        <f:view>
            <h:form>
                <h1><h:outputText value="Liste des Clients"/></h1>
                <p:dataTable value="#{customerMBean.customers}" var="item" 
                             emptyMessage="No customer found with given criteria" 
                             widgetVar="customerTable"
                             paginator="true"
                             rows="10">

                    <f:facet name="header">  
                        <p:outputPanel>  
                            <h:outputText value="Search all fields:" />  
                            <p:inputText id="globalFilter" onkeyup="customerTable.filter()" style="width:150px" />  
                        </p:outputPanel>  
                    </f:facet>  

                    <p:column headerText="CustomerId"
                              sortBy="#{item.customerId}"
                              filterBy="#{item.customerId}"
                              filterMatchMode="contains">
                        <h:commandLink action="#{customerMBean.showDetails(item)}" value="#{item.customerId}"/>  
                    </p:column>
                    <p:column headerText="name"
                              sortBy="#{item.name}"
                              filterBy="#{item.name}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.name}"/>
                    </p:column>
                    <p:column headerText="addressline1"
                              sortBy="#{item.addressline1}"
                              filterBy="#{item.addressline1}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.addressline1}"/>
                    </p:column>
                    <p:column headerText="addressline2"
                              sortBy="#{item.addressline2}"
                              filterBy="#{item.addressline2}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.addressline2}"/>
                    </p:column>
                    <p:column headerText="city"
                              sortBy="#{item.city}"
                              filterBy="#{item.city}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.city}"/>
                    </p:column>
                 
                    <p:column headerText="state"
                              sortBy="#{item.state}"
                              filterBy="#{item.state}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.state}"/>
                    </p:column>
                    <p:column headerText="phone"
                              sortBy="#{item.phone}"
                              filterBy="#{item.phone}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.phone}"/>
                    </p:column>
                    <p:column headerText="fax"
                              sortBy="#{item.fax}"
                              filterBy="#{item.fax}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.fax}"/>
                    </p:column>
                    <p:column headerText="email"
                              sortBy="#{item.email}"
                              filterBy="#{item.email}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.email}"/>
                    </p:column>
                    <p:column headerText="creditLimit"
                              sortBy="#{item.creditLimit}"
                              filterBy="#{item.creditLimit}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.creditLimit}"/>
                    </p:column>
                    <p:column headerText="DiscountCode"
                              sortBy="#{item.discountCode.discountCode}"
                              filterBy="#{item.discountCode.rate}%"
                              filterMatchMode="contains">
                        <h:outputText  value="#{item.discountCode}"/>
                        <h:outputText  value="#{item.discountCode.rate}%"/>
                    </p:column>
                </p:dataTable>

            </h:form>
        </f:view>


    </h:body>
</html>
